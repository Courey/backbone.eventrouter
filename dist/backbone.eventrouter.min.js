/**
 * backbone.eventrouter - A highly opinionated, simplistic Backbone.Router coupled with a Backbone.Radio.Channel
 * @version v0.1.0
 * @link https://github.com/RoundingWellOS/backbone.eventrouter
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("underscore"),require("backbone"),require("backbone.radio")):"function"==typeof define&&define.amd?define(["underscore","backbone","backbone.radio"],e):t.Backbone.EventRouter=e(t._,t.Backbone,t.Radio)}(this,function(t,e,r){"use strict";var i=/(\(\?)?:\w+/,n=[].slice,o=e.EventRouter=e.Router.extend({constructor:function(r){r=t.extend({},r),e.Router.apply(this,arguments),t.extend(this,t.pick(r,["channelName","routeTriggers"])),this._ch=e.Radio.channel(t.result(this,"channelName")),t.isFunction(this.routeTriggers)&&(this.routeTriggers=this.routeTriggers.call(this,r)),this._createRoutes(),this.listenTo(this._ch,"all",this.handleRoute)},channelName:"event-router",getChannel:function(){return this._ch},_createRoutes:function(){t.each(this.routeTriggers,function(e,r){e=t.isArray(e)?e:[e],t.each(e,function(e){this.route(e,r,t.bind(this._ch.trigger,this._ch,r))},this)},this)},route:function(r,i,o){if(t.isFunction(i)&&(o=i,i=""),o||(o=this[i]),!o)return this;var u=t.bind(function(){var t=n.call(arguments);this.trigger("before:route",i,t),this.trigger.apply(this,["before:route:"+i].concat(t)),o.apply(this,t)},this);return e.Router.prototype.route.call(this,r,i,u)},handleRoute:function(t){var e=this.getDefaultRoute(t);if(!e)return this;var r=n.call(arguments,1,arguments.length-1),i=this.translateRoute.apply(this,[t,e].concat(r));return this.navigate(i,{trigger:!1}),this},getDefaultRoute:function(e){var r=this.routeTriggers[e];return t.isArray(r)?r[0]:r},translateRoute:function(e,r){var n=t.tail(arguments,2),o=r;return t.each(n,function(t){o=o.replace(i,t)}),o}}),u=o;return u});
//# sourceMappingURL=backbone.eventrouter.min.js.map